var loginLink=document.querySelector(".login-link"),loginPopup=document.querySelector(".modal-login"),loginClose=loginPopup.querySelector(".modal-close"),loginForm=loginPopup.querySelector(".login-form"),inputMail=document.querySelector("[name=mail]"),inputPassword=document.querySelector("[name=password]"),overlay=document.querySelector(".overlay"),isStorage=!0,storage="";loginLink.addEventListener("mouseover",function(e){e.preventDefault(),loginPopup.classList.add("modal-show"),overlay.classList.add("modal-show"),inputMail.focus(),storage&&(login.value=storage)}),loginClose.addEventListener("click",function(e){e.preventDefault(),loginPopup.classList.remove("modal-show"),overlay.classList.remove("modal-show"),popup.classList.remove("modal-error")}),loginForm.addEventListener("submit",function(e){e.preventDefault(),inputMail.value&&inputPassword.value?localStorage.setItem("mail",inputMail.value):(e.preventDefault(),console.log(inputMail),console.log("Нужно ввести адрес почты и пароль"),popup.classList.add("modal-error"))});try{storage=localStorage.getItem("mail")}catch(e){isStorageSupport=!1}var searchLink=document.querySelector(".search"),searchPopup=document.querySelector(".modal-search"),searchClose=searchPopup.querySelector(".modal-close");searchLink.addEventListener("mouseover",function(e){e.preventDefault(),searchPopup.classList.add("modal-show"),overlay.classList.add("modal-show")}),searchClose.addEventListener("click",function(e){e.preventDefault(),searchPopup.classList.remove("modal-show"),overlay.classList.remove("modal-show")});var mapLink=document.querySelector(".main-map"),mapPopup=document.querySelector(".modal-map");if(null!==mapPopup){var mapClose=mapPopup.querySelector(".modal-close");mapLink.addEventListener("click",function(e){e.preventDefault(),mapPopup.classList.add("modal-show")}),mapClose.addEventListener("click",function(e){e.preventDefault(),mapPopup.classList.remove("modal-show")})}var feedbackLink=document.querySelector(".button-main-contacts"),feedbackPopup=document.querySelector(".modal-feedback");if(null!==feedbackPopup){var feedbackClose=feedbackPopup.querySelector(".modal-feedback-close");feedbackLink.addEventListener("click",function(e){e.preventDefault(),feedbackPopup.classList.add("modal-show"),overlay.classList.add("modal-show")}),feedbackClose.addEventListener("click",function(e){e.preventDefault(),feedbackPopup.classList.remove("modal-show"),overlay.classList.remove("modal-show")})}var basketLink=document.querySelector(".basket-full"),basketPopup=document.querySelector(".modal-basket");if(null!==basketPopup){var basketClose=basketPopup.querySelector(".modal-basket-close");basketLink.addEventListener("mouseover",function(e){e.preventDefault(),basketPopup.classList.add("modal-show"),overlay.classList.add("modal-show")}),basketClose.addEventListener("click",function(e){e.preventDefault(),basketPopup.classList.remove("modal-show"),overlay.classList.remove("modal-show")})}window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),loginPopup.classList.contains("modal-show")&&(loginPopup.classList.remove("modal-show"),popup.classList.remove("modal-error")),searchPopup.classList.contains("modal-show")&&searchPopup.classList.remove("modal-show"),null!==mapPopup&&mapPopup.classList.contains("modal-show")&&mapPopup.classList.remove("modal-show"),null!==feedbackPopup&&feedbackPopup.classList.contains("modal-show")&&feedbackPopup.classList.remove("modal-show"),null!==basketPopup&&basketPopup.classList.contains("modal-show")&&basketPopup.classList.remove("modal-show"),overlay.classList.remove("modal-show"))});